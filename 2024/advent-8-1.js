let input = `......................D....B...h..................
..............................h...................
.............D...3.....X..................9.......
...........C........X....2.hB......v........b.....
....................................O.............
......u.....3.........p...........................
....u......................v....6.................
......................y..D.....Ov.2..............b
.....u..........X...........o........y............
.........................y...B.f...........s......
.7....................C.2.....Bsyp..........t...q.
.u.7...........X............................Oe..t.
...........V........3......6v.s........o....h....t
..E........L.................6..........o......9..
........E......m.2.P.......O...9...8....b.........
..m..........3.......p..........M8................
..1.....................K.p....................b.e
5...............L...........s.6..........S.M......
....5..1.......E.........k.f.........M............
.E..Y..V......l.......T...D.......9....Q..........
..............................M...................
.....5....P................m...x..q......F......e.
................f...c......................x..F...
..V.C...........7.......a....o....8.........F.....
.......4....L.a..g..P.....8......Q....7d..........
...1......4..a............k......t...d............
..........V..........L....m........K....Q........S
..................1....k.....T....................
..........l......a...............F................
...........P...4.......l......x...................
.............c....g........T......................
.....g............c...Q.......................S...
...............l..................A.d.T.U.........
..........................f...0.............d.....
..........G..................A............e.S...x.
.........Y.......q........g....K..................
.....................q.H4...0.................j...
....................HA..............J.............
..Y..........................0...J.......j........
.......................G.JA...................U...
.......5..........................................
...........c..............G.........K.............
...............................G..................
...........................0.j....................
............................H.......k..........U..
.........................H........................
...................................Y....J.........
..................................j...............
..................................................
..................................................`;

input = input.split("\n").map((str) => str.split(""));

const n = input.length;
const m = input[0].length;

const antenna = {};

for (let i = 0; i < n; i++)
  for (let j = 0; j < m; j++) {
    const char = input[i][j];
    if (char !== ".") {
      if (!antenna[char]) antenna[char] = [];
      antenna[char].push([j, i]);
    }
  }

let freqCoords = [];

for (const char in antenna) {
  const coords = antenna[char];
  for (let i = 0; i < coords.length; i++)
    for (let j = i + 1; j < coords.length; j++) {
      const [x1, y1] = coords[i];
      const [x2, y2] = coords[j];
      const [diffX, diffY] = [x2 - x1, y2 - y1];
      const [x3, y3] = [x2 + diffX, y2 + diffY];
      const [x4, y4] = [x1 - diffX, y1 - diffY];
      freqCoords.push([x3, y3], [x4, y4]);
    }
}

freqCoords = freqCoords.filter(([x, y]) => 0 <= x && x < m && 0 <= y && y < n);
freqCoords = freqCoords.map(([x, y]) => `${x},${y}`);
freqCoords = new Set(freqCoords);

const result = freqCoords.size;
console.log(result);
